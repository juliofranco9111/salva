(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{E5tf:function(t,e,n){"use strict";n.r(e),n.d(e,"ChildRoutesModule",function(){return st});var o=n("3Pt+"),i=n("fXoL"),s=n("tyNb"),a=n("qfBg"),b=n("ZJFI"),c=n("ofXK");let r=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Db({type:t,selectors:[["app-loading"]],decls:3,vars:0,consts:[[1,"row","text-center"],[1,"col"],[1,"fa","fa-circle-o-notch","fa-5x","fa-spin"]],template:function(t,e){1&t&&(i.Mb(0,"div",0),i.Mb(1,"div",1),i.Kb(2,"i",2),i.Lb(),i.Lb())},encapsulation:2}),t})();function l(t,e){1&t&&i.Kb(0,"app-loading",2)}function d(t,e){if(1&t&&(i.Mb(0,"option",34),i.fc(1),i.Lb()),2&t){const t=e.$implicit;i.Wb("value",t),i.yb(1),i.gc(t)}}const u=function(){return{standalone:!0}};function m(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",12),i.Mb(1,"label",35),i.fc(2,"Nueva categor\xeda"),i.Lb(),i.Mb(3,"input",36),i.Tb("ngModelChange",function(e){return i.bc(t),i.Vb(2).category2=e}),i.Lb(),i.Kb(4,"span",17),i.Lb()}if(2&t){const t=i.Vb(2);i.yb(3),i.Wb("ngModel",t.category2)("ngModelOptions",i.Yb(2,u))}}function h(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",37),i.Mb(1,"button",38),i.Tb("click",function(){return i.bc(t),i.Vb(2).updateMovement()}),i.Kb(2,"i",39),i.Lb(),i.Lb()}if(2&t){const t=i.Vb(2);i.yb(1),i.Wb("disabled",t.editMovement.invalid)}}function f(t,e){1&t&&(i.Mb(0,"div",37),i.Mb(1,"button",40),i.Kb(2,"i",41),i.Lb(),i.Lb())}function g(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",3),i.Mb(1,"div",4),i.Mb(2,"div",5),i.Mb(3,"div",6),i.Kb(4,"span",7),i.Mb(5,"h1",8),i.fc(6,"Editar movimiento"),i.Lb(),i.Lb(),i.Mb(7,"form",9),i.Tb("ngSubmit",function(){return i.bc(t),i.Vb().saveNewMovement()}),i.Mb(8,"div",10),i.Mb(9,"div",11),i.Mb(10,"div",12),i.Mb(11,"label",13),i.fc(12,"Tipo de movimiento"),i.Lb(),i.Mb(13,"select",14),i.Kb(14,"option"),i.Mb(15,"option",15),i.fc(16,"Ingreso"),i.Lb(),i.Mb(17,"option",16),i.fc(18,"Gasto"),i.Lb(),i.Lb(),i.Kb(19,"span",17),i.Lb(),i.Lb(),i.Mb(20,"div",18),i.Mb(21,"div",12),i.Mb(22,"label",19),i.fc(23,"Monto"),i.Lb(),i.Kb(24,"input",20),i.Kb(25,"span",17),i.Lb(),i.Lb(),i.Lb(),i.Mb(26,"div",10),i.Mb(27,"div",11),i.Mb(28,"div",12),i.Mb(29,"label",21),i.fc(30,"Categoria"),i.Lb(),i.Mb(31,"select",22),i.ec(32,d,2,2,"option",23),i.Mb(33,"option",24),i.fc(34," Otra..."),i.Lb(),i.Lb(),i.Kb(35,"span",17),i.Lb(),i.Lb(),i.Mb(36,"div",18),i.ec(37,m,5,3,"div",25),i.Lb(),i.Mb(38,"div",26),i.Mb(39,"label",27),i.fc(40,"Comentario"),i.Lb(),i.Kb(41,"input",28),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(42,"div",29),i.ec(43,h,3,1,"div",30),i.ec(44,f,3,0,"div",30),i.Mb(45,"div",31),i.Mb(46,"button",32),i.Kb(47,"i",33),i.Lb(),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=i.Vb();i.yb(7),i.Wb("formGroup",t.editMovement),i.yb(25),i.Wb("ngForOf",t.categories),i.yb(5),i.Wb("ngIf","otra"===t.editMovement.controls.category.value),i.yb(6),i.Wb("ngIf",!t.updateLoading),i.yb(1),i.Wb("ngIf",t.updateLoading)}}let M=(()=>{class t{constructor(t,e,n,i,s){this.activatedRoute=t,this.userService=e,this.fb=n,this.dB=i,this._location=s,this.categories=[],this.category2="",this.loading=!0,this.updateLoading=!1,this.editMovement=this.fb.group({type:["",o.p.required],amount:[0,o.p.required],category:[""],id:["0",o.p.required],comment:["",o.p.maxLength(50)]})}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.uid=this.userService.user.uid,this.idMovement=this.activatedRoute.params.value.id,this.monthMovement=this.activatedRoute.params.value.month,this.subscription=this.dB.getMovementById(this.uid,this.monthMovement,this.idMovement).subscribe(t=>{this.selectedMovement=t;const{id:e,type:n,category:o,amount:i,comment:s}=this.selectedMovement;this.editMovement.controls.amount.setValue(i),this.editMovement.controls.id.setValue(e),this.editMovement.controls.type.setValue(n),this.editMovement.controls.category.setValue(o),this.editMovement.controls.comment.setValue(s)}),this.subscription=this.dB.getCategories(this.uid).subscribe(t=>{this.categories=t&&null!==t?Object.values(t):[]},t=>console.log(t)),setTimeout(()=>{this.loading=!1},800)}updateMovement(){this.updateLoading=!0,"otra"===this.editMovement.controls.category.value&&this.category2.length<1?this.updateLoading=!1:("otra"===this.editMovement.controls.category.value&&(this.editMovement.controls.category.setValue(this.category2),this.categories.includes(this.category2)||this.dB.saveCategory(this.category2,this.uid)),this.dB.updateMovement(this.uid,this.idMovement,this.monthMovement,this.editMovement.value).then(()=>{this.updateLoading=!1,this._location.back()}).catch(t=>console.log(t)))}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(s.a),i.Jb(a.a),i.Jb(o.c),i.Jb(b.a),i.Jb(c.f))},t.\u0275cmp=i.Db({type:t,selectors:[["app-edit-movement"]],decls:2,vars:2,consts:[["class","animated fadeIn",4,"ngIf"],["class","container animated fadeIn",4,"ngIf"],[1,"animated","fadeIn"],[1,"container","animated","fadeIn"],[1,"card","mt-0"],[1,"card-body"],[1,"d-flex","mt-0"],[1,"lstick"],[1,"card-title","mx-auto"],[1,"form-material","m-t-40",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6","margin-x20"],[1,"form-group","m-b-40"],["for","input6"],["formControlName","type","id","input68",1,"form-control","p-0"],["value","ingreso"],["value","gasto"],[1,"bar"],[1,"col-sm-4","margin-x20"],["for","input8"],["formControlName","amount","type","number","id","input12",1,"form-control"],["for","input9"],["formControlName","category","id","input6",1,"form-control","p-0"],[3,"value",4,"ngFor","ngForOf"],["value","otra"],["class","form-group m-b-40",4,"ngIf"],[1,"col-sm-11","margin-x20","text-left","mb-5"],["for","input0"],["type","text","formControlName","comment",1,"form-control"],[1,"row","col","col-md-5","mx-auto","text-center"],["class","col col-md-5 mt-2 stick-button","style","position: relative; top: -40px;",4,"ngIf"],[1,"mx-auto","col","col-md-5","mt-2","stick-button",2,"position","relative","top","-40px"],["routerLink","/home","type","button",1,"btn","btn-danger","round-button","text-white"],[1,"fa","fa-times","fa-2x"],[3,"value"],["for","input1"],["type","text","id","input1",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col","col-md-5","mt-2","stick-button",2,"position","relative","top","-40px"],[1,"btn","btn-success","round-button","text-white",3,"disabled","click"],[1,"fa","fa-save","fa-2x"],[1,"btn","btn-success","round-button","text-white"],[1,"fa","fa-refresh","fa-spin","fa-2x"]],template:function(t,e){1&t&&(i.ec(0,l,1,0,"app-loading",0),i.ec(1,g,48,5,"div",1)),2&t&&(i.Wb("ngIf",e.loading),i.yb(1),i.Wb("ngIf",!e.loading))},directives:[c.i,r,o.r,o.h,o.e,o.o,o.g,o.d,o.k,o.q,o.b,o.l,c.h,s.c,o.j],encapsulation:2}),t})();function v(t,e){if(1&t&&(i.Mb(0,"option",33),i.fc(1),i.Lb()),2&t){const t=e.$implicit;i.Wb("value",t),i.yb(1),i.gc(t)}}function p(t,e){1&t&&(i.Mb(0,"span",37),i.fc(1,"* La categoria es obligatoria"),i.Lb())}const y=function(){return{standalone:!0}};function L(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",9),i.Mb(1,"label",34),i.fc(2,"Nueva categor\xeda"),i.Lb(),i.Mb(3,"input",35),i.Tb("ngModelChange",function(e){return i.bc(t),i.Vb().category2=e}),i.Lb(),i.ec(4,p,2,0,"span",36),i.Kb(5,"span",14),i.Lb()}if(2&t){const t=i.Vb();i.yb(3),i.Wb("ngModel",t.category2)("ngModelOptions",i.Yb(3,y)),i.yb(1),i.Wb("ngIf",t.categoryValidator)}}let x=(()=>{class t{constructor(t,e,n,i){this.fb=t,this.userService=e,this.dB=n,this.router=i,this.newMovement=this.fb.group({type:["",o.p.required],amount:[,o.p.required],category:["",o.p.required],id:["0",o.p.required],comment:["",o.p.maxLength(300)]}),this.categoryValidator=!1,this.categories=[],this.category2="",this.date=new Date,this.month=this.date.getMonth()}ngOnDestroy(){this.categorySubscribe.unsubscribe()}ngOnInit(){this.uid=this.userService.user.uid,this.categorySubscribe=this.dB.getCategories(this.uid).subscribe(t=>{this.categories=t&&null!==t?Object.values(t):[]})}saveNewMovement(){const t=this.date.getTime().toString(),e=this.newMovement.controls.category;if("otra"===e.value||e.value.length<0){if(console.log(e.value),0===this.category2.length)return this.categoryValidator=!0,!1;e.setValue(this.category2)}this.categories.includes(e.value)||this.dB.saveCategory(e.value,this.uid);const n=this.newMovement.value;n.id=t,n.month=this.month,this.dB.saveMovement(this.uid,t,this.month,n).then(()=>{this.router.navigateByUrl("/home")}).catch(t=>console.log(t))}cancel(){this.router.navigateByUrl("/home")}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(o.c),i.Jb(a.a),i.Jb(b.a),i.Jb(s.b))},t.\u0275cmp=i.Db({type:t,selectors:[["app-new-movement"]],decls:49,vars:4,consts:[[1,"container"],[1,"card","mt-0"],[1,"card-body"],[1,"d-flex","mt-0"],[1,"lstick"],[1,"card-title","mx-auto"],[1,"form-material","m-t-40",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6","margin-x20"],[1,"form-group","m-b-40"],["for","input6"],["formControlName","type","id","input68",1,"form-control","p-0"],["value","ingreso"],["value","gasto"],[1,"bar"],[1,"col-sm-4","margin-x20"],["for","input8"],["formControlName","amount","type","number","id","input12",1,"form-control"],["for","input9"],["formControlName","category","id","input6",1,"form-control","p-0"],[3,"value",4,"ngFor","ngForOf"],["value","otra"],["class","form-group m-b-40",4,"ngIf"],[1,"col-sm-11","margin-x20","text-left","mb-5"],["for","input0"],["type","text","formControlName","comment",1,"form-control"],[1,"row","col","col-md-5","mx-auto","text-center"],[1,"col","col-md-5","mt-2","stick-button",2,"position","relative","top","-40px"],[1,"btn","btn-success","round-button","text-white",3,"disabled","click"],[1,"fa","fa-save","fa-2x"],[1,"mx-auto","col","col-md-5","mt-2","stick-button",2,"position","relative","top","-40px"],["type","button",1,"btn","btn-danger","round-button","text-white",3,"click"],[1,"fa","fa-times","fa-2x"],[3,"value"],["for","input1"],["type","text","id","input1",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,e){1&t&&(i.Mb(0,"div",0),i.Mb(1,"div",1),i.Mb(2,"div",2),i.Mb(3,"div",3),i.Kb(4,"span",4),i.Mb(5,"h1",5),i.fc(6,"Nuevo movimiento"),i.Lb(),i.Lb(),i.Mb(7,"form",6),i.Tb("ngSubmit",function(){return e.saveNewMovement()}),i.Mb(8,"div",7),i.Mb(9,"div",8),i.Mb(10,"div",9),i.Mb(11,"label",10),i.fc(12,"Tipo de movimiento"),i.Lb(),i.Mb(13,"select",11),i.Kb(14,"option"),i.Mb(15,"option",12),i.fc(16,"Ingreso"),i.Lb(),i.Mb(17,"option",13),i.fc(18,"Gasto"),i.Lb(),i.Lb(),i.Kb(19,"span",14),i.Lb(),i.Lb(),i.Mb(20,"div",15),i.Mb(21,"div",9),i.Mb(22,"label",16),i.fc(23,"Monto"),i.Lb(),i.Kb(24,"input",17),i.Kb(25,"span",14),i.Lb(),i.Lb(),i.Lb(),i.Mb(26,"div",7),i.Mb(27,"div",8),i.Mb(28,"div",9),i.Mb(29,"label",18),i.fc(30,"Categoria"),i.Lb(),i.Mb(31,"select",19),i.ec(32,v,2,2,"option",20),i.Mb(33,"option",21),i.fc(34," Otra..."),i.Lb(),i.Lb(),i.Kb(35,"span",14),i.Lb(),i.Lb(),i.Mb(36,"div",15),i.ec(37,L,6,4,"div",22),i.Lb(),i.Mb(38,"div",23),i.Mb(39,"label",24),i.fc(40,"Comentario"),i.Lb(),i.Kb(41,"input",25),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(42,"div",26),i.Mb(43,"div",27),i.Mb(44,"button",28),i.Tb("click",function(){return e.saveNewMovement()}),i.Kb(45,"i",29),i.Lb(),i.Lb(),i.Mb(46,"div",30),i.Mb(47,"button",31),i.Tb("click",function(){return e.cancel()}),i.Kb(48,"i",32),i.Lb(),i.Lb(),i.Lb(),i.Lb()),2&t&&(i.yb(7),i.Wb("formGroup",e.newMovement),i.yb(25),i.Wb("ngForOf",e.categories),i.yb(5),i.Wb("ngIf","otra"===e.newMovement.controls.category.value),i.yb(7),i.Wb("disabled",e.newMovement.invalid))},directives:[o.r,o.h,o.e,o.o,o.g,o.d,o.k,o.q,o.b,o.l,c.h,c.i,o.j],encapsulation:2}),t})();var I=n("PSD3"),w=n.n(I);let C=(()=>{class t{constructor(t,e){this.dB=t,this.userService=e,this.uid="",setTimeout(()=>{this.uid=this.userService.user.uid,this.dB.getInfo(this.uid).subscribe(t=>{t&&(this.info=t,this.symbol=this.info.symbol)},t=>!1)},800)}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(b.a),i.Qb(a.a))},t.\u0275prov=i.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),W=(()=>{class t{constructor(){this.movements=[],this.earnings=[],this.expenses=[],this.categories=[],this.totalEarnings=0,this.totalExpenses=0,this.balance=0,this.loading=!0,this.data=!1,this.newMovButton=!0,this.changedMonth=!1,this.date=new Date,this.todayMonth=this.date.getMonth(),this.balanceClass="success",this.uid=localStorage.getItem("uid"),this.category2="",this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}getFilterMovements(){this.expenses=this.movements.filter(t=>"gasto"===t.type),this.earnings=this.movements.filter(t=>"ingreso"===t.type)}totals(){this.totalEarnings=0,this.totalExpenses=0,this.earnings.forEach(t=>{this.totalEarnings+=t.amount}),this.expenses.forEach(t=>{this.totalExpenses+=t.amount}),this.getBalance()}getBalance(){const t=50*this.movements[0].amount/100,e=20*this.movements[0].amount/100;this.balance=this.totalEarnings-this.totalExpenses,this.balance<=t&&this.balance>e?this.balanceClass="warning":this.balance<=e&&(this.balanceClass="danger")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function B(t,e){1&t&&i.Kb(0,"app-loading",9)}function k(t,e){if(1&t&&(i.Mb(0,"option",15),i.fc(1),i.Lb()),2&t){const t=e.$implicit,n=e.index,o=i.Vb(3);i.Xb("value",n),i.Wb("selected",o.todayMonth==n),i.yb(1),i.hc("",t," ")}}function V(t,e){if(1&t){const t=i.Nb();i.Mb(0,"select",13),i.Tb("change",function(e){return i.bc(t),i.Vb(2).changeMonth(e.target.value)}),i.ec(1,k,2,3,"option",14),i.Lb()}if(2&t){const t=i.Vb(2);i.yb(1),i.Wb("ngForOf",t.newMonths)}}function K(t,e){if(1&t&&(i.Mb(0,"option",15),i.fc(1),i.Lb()),2&t){const t=e.$implicit,n=e.index,o=i.Vb(3);i.Xb("value",n),i.Wb("selected",o.todayMonth==n+1),i.yb(1),i.hc("",t," ")}}function S(t,e){if(1&t){const t=i.Nb();i.Mb(0,"select",16),i.Tb("change",function(e){return i.bc(t),i.Vb(2).changeMonth(e.target.value)}),i.ec(1,K,2,3,"option",14),i.Lb()}if(2&t){const t=i.Vb(2);i.yb(1),i.Wb("ngForOf",t.newMonths)}}function N(t,e){1&t&&(i.Mb(0,"div",17),i.Kb(1,"app-loading"),i.Lb())}function E(t,e){if(1&t&&(i.Mb(0,"div"),i.ec(1,V,2,1,"select",10),i.ec(2,S,2,1,"select",11),i.ec(3,N,2,0,"div",12),i.Lb()),2&t){const t=i.Vb();i.yb(1),i.Wb("ngIf",0==t.todayMonth),i.yb(1),i.Wb("ngIf",0==!t.todayMonth),i.yb(1),i.Wb("ngIf",t.changedMonth)}}function O(t,e){1&t&&(i.Mb(0,"div",18),i.Mb(1,"h1"),i.fc(2," No hay movimientos a\xfan... "),i.Lb(),i.Lb())}function T(t,e){1&t&&(i.Mb(0,"div",19),i.Mb(1,"div",20),i.Mb(2,"h3"),i.fc(3," Toc\xe1 el \xedcono "),i.Kb(4,"i",21),i.fc(5," en la barra superior para cargar tu informaci\xf3n financiera... "),i.Lb(),i.Lb(),i.Lb())}function F(t,e){1&t&&(i.Mb(0,"div",19),i.Mb(1,"div",20),i.Mb(2,"h3"),i.fc(3," Comenz\xe1 creando un moviemiento "),i.Lb(),i.Lb(),i.Lb())}function J(t,e){1&t&&(i.Mb(0,"div",22),i.Mb(1,"a",23),i.Kb(2,"span",24),i.Lb(),i.Lb())}function D(t,e){if(1&t&&(i.Mb(0,"span",41),i.fc(1),i.Lb()),2&t){const t=i.Vb(2).$implicit;i.yb(1),i.gc(t.comment)}}const q=function(t,e){return["/edit",t,e]};function $(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",30),i.Kb(1,"i",31),i.Mb(2,"div",32),i.Mb(3,"span",33),i.Mb(4,"strong"),i.fc(5),i.Lb(),i.Lb(),i.Kb(6,"br"),i.ec(7,D,2,1,"span",34),i.Lb(),i.Mb(8,"div",35),i.Mb(9,"span",36),i.fc(10),i.Lb(),i.Mb(11,"span",37),i.fc(12),i.Lb(),i.Lb(),i.Mb(13,"div",38),i.Kb(14,"i",39),i.Mb(15,"i",40),i.Tb("click",function(){i.bc(t);const e=i.Vb().$implicit;return i.Vb(2).deleteMovement(e)}),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=i.Vb().$implicit,e=i.Vb(2);i.yb(5),i.hc(" ",t.category," "),i.yb(2),i.Wb("ngIf",t.comment),i.yb(3),i.gc(e.symbol),i.yb(2),i.hc(" ",t.amount," "),i.yb(2),i.Wb("routerLink",i.Zb(5,q,t.month,t.id))}}function z(t,e){if(1&t&&(i.Mb(0,"span",41),i.fc(1),i.Lb()),2&t){const t=i.Vb(2).$implicit;i.yb(1),i.gc(t.comment)}}function G(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",30),i.Kb(1,"i",42),i.Mb(2,"div",43),i.Mb(3,"span",33),i.Mb(4,"strong"),i.fc(5),i.Lb(),i.Lb(),i.Kb(6,"br"),i.ec(7,z,2,1,"span",34),i.Lb(),i.Mb(8,"div",35),i.Mb(9,"span",36),i.fc(10),i.Lb(),i.Mb(11,"span",44),i.fc(12),i.Lb(),i.Lb(),i.Mb(13,"div",38),i.Kb(14,"i",39),i.Mb(15,"i",40),i.Tb("click",function(){i.bc(t);const e=i.Vb().$implicit;return i.Vb(2).deleteMovement(e)}),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=i.Vb().$implicit,e=i.Vb(2);i.yb(5),i.hc(" ",t.category," "),i.yb(2),i.Wb("ngIf",t.comment),i.yb(3),i.gc(e.symbol),i.yb(2),i.hc(" ",t.amount," "),i.yb(2),i.Wb("routerLink",i.Zb(5,q,t.month,t.id))}}function j(t,e){if(1&t&&(i.Mb(0,"li",28),i.ec(1,$,16,8,"div",29),i.ec(2,G,16,8,"div",29),i.Lb()),2&t){const t=e.$implicit;i.yb(1),i.Wb("ngIf","ingreso"===t.type),i.yb(1),i.Wb("ngIf","gasto"===t.type)}}function A(t,e){if(1&t&&(i.Mb(0,"div",25),i.Mb(1,"div"),i.Mb(2,"ul",26),i.ec(3,j,3,2,"li",27),i.Lb(),i.Lb(),i.Lb()),2&t){const t=i.Vb();i.yb(3),i.Wb("ngForOf",t.movements)}}function U(t,e){1&t&&(i.Mb(0,"div",22),i.Mb(1,"a",23),i.Kb(2,"span",24),i.Lb(),i.Lb())}function X(t,e){if(1&t&&(i.Mb(0,"div",45),i.Mb(1,"div",46),i.Mb(2,"div",47),i.Mb(3,"div",48),i.Mb(4,"div",49),i.Mb(5,"h3",50),i.fc(6,"Ingresos"),i.Lb(),i.Mb(7,"h4",51),i.Mb(8,"span"),i.fc(9),i.Lb(),i.fc(10),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(11,"div",46),i.Mb(12,"div",47),i.Mb(13,"div",48),i.Mb(14,"div",49),i.Mb(15,"h3",52),i.fc(16,"Gastos"),i.Lb(),i.Mb(17,"h4",51),i.Mb(18,"span"),i.fc(19),i.Lb(),i.fc(20),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb()),2&t){const t=i.Vb();i.yb(9),i.gc(t.symbol),i.yb(1),i.hc(" ",t.totalEarnings," "),i.yb(9),i.gc(t.symbol),i.yb(1),i.hc(" ",t.totalExpenses," ")}}function P(t,e){if(1&t&&(i.Mb(0,"div"),i.Mb(1,"div"),i.Mb(2,"div",47),i.Mb(3,"h3",53),i.fc(4,"Balance"),i.Lb(),i.Mb(5,"div",48),i.Mb(6,"div",49),i.Mb(7,"h1",54),i.fc(8),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb()),2&t){const t=i.Vb();i.Ab("card bg-",t.balanceClass," text-white col-12 col-sm-5 container mx-auto animated fadeIn mt-2"),i.yb(8),i.ic("",t.symbol," ",t.balance,"")}}let Q=(()=>{class t{constructor(t,e,n,o){this.userService=t,this.dB=e,this.infoService=n,this.movementService=o,this.movements=[],this.earnings=[],this.expenses=[],this.categories=[],this.totalEarnings=0,this.totalExpenses=0,this.balance=0,this.loading=!0,this.data=!1,this.info=!0,this.newMovButton=!0,this.changedMonth=!1,this.date=new Date,this.todayMonth=this.date.getMonth(),this.balanceClass="success",this.category2="",this.symbol=this.infoService.symbol,this.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],this.newMonths=[]}ngOnDestroy(){(this.info||this.data)&&this.subscription.unsubscribe()}ngOnInit(){this.user=this.userService.user,this.subscription=this.dB.getMonthsMovements(this.user.uid).subscribe(t=>{if(t)for(let e=0;e<t.length;e++)this.newMonths.push(this.months[t[e]])},t=>!1),this.subscription=this.getMovements().subscribe(t=>{t&&0!==t.length?(this.movements=t,this.data=!0,this.getFilterMovements(),this.totals()):(this.data=!1,this.loading=!1)},t=>!1),setTimeout(()=>{this.info=!!this.infoService.info,this.loading=!1},1100)}getFilterMovements(){this.expenses=this.movements.filter(t=>"gasto"===t.type),this.earnings=this.movements.filter(t=>"ingreso"===t.type)}totals(){this.totalEarnings=0,this.totalExpenses=0,this.earnings.forEach(t=>{this.totalEarnings+=t.amount}),this.expenses.forEach(t=>{this.totalExpenses+=t.amount}),this.getBalance()}getBalance(){if(this.info){const t=50*this.movements[0].amount/100,e=20*this.movements[0].amount/100;this.balance=this.totalEarnings-this.totalExpenses,this.balanceClass=this.balance<=t&&this.balance>e?"warning":this.balance<=e?"danger":"success"}}changeMonth(t){let e=parseInt(t);0!=this.todayMonth&&(e+=1),this.newMovButton=e==this.todayMonth,this.changedMonth=!0,this.subscription=this.dB.getMovements(this.user.uid,e).subscribe(t=>{t&&0!==t.length?(this.movements=t,this.changedMonth=!1,this.data=!0):(this.data=!1,this.changedMonth=!1)},t=>!1),this.getFilterMovements(),this.totals()}getMovements(){return this.dB.getMovements(this.user.uid,this.todayMonth)}deleteMovement(t){const{id:e,month:n}=t;w.a.fire({title:"\xbfEsta seguro de eliminar el movimiento?",text:"\xc9sta acci\xf3n no se puede revertir",icon:"warning",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar"}).then(t=>{t.isConfirmed&&(this.dB.deleteMovement(this.user.uid,n,e),w.a.fire("Eliminado","El movimiento se ha borrado","success")),this.totals()})}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(a.a),i.Jb(b.a),i.Jb(C),i.Jb(W))},t.\u0275cmp=i.Db({type:t,selectors:[["app-movements"]],decls:11,vars:10,consts:[["class","animated fadeIn",4,"ngIf"],[1,"mx-auto","col-12","col-sm-10","col-md-10","col-xl-7","mb-3","animated","fadeIn"],[4,"ngIf"],["class","alert alert-info text-center animated fadeIn mt-4",4,"ngIf"],["class","card mx-auto col-12 col-sm-10 col-md-10 col-xl-7 animated fadeIn",4,"ngIf"],["class","text-center animated fadeIn","id","new-button",4,"ngIf"],["class","mx-auto col-12 col-sm-10 col-md-10 col-xl-7 animated fadeIn",4,"ngIf"],["class","row container mx-auto",4,"ngIf"],[3,"class",4,"ngIf"],[1,"animated","fadeIn"],["class","form-control btn-muted col-10",3,"change",4,"ngIf"],["class","form-control btn-muted",3,"change",4,"ngIf"],["class","container animated fadeIn mt-5",4,"ngIf"],[1,"form-control","btn-muted","col-10",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"],[1,"form-control","btn-muted",3,"change"],[1,"container","animated","fadeIn","mt-5"],[1,"alert","alert-info","text-center","animated","fadeIn","mt-4"],[1,"card","mx-auto","col-12","col-sm-10","col-md-10","col-xl-7","animated","fadeIn"],[1,"card-body","text-center"],[1,"fa","fa-user"],["id","new-button",1,"text-center","animated","fadeIn"],["routerLink","/new",1,"text-secondary"],["id","plus-button",1,"fa","fa-plus","fa-2x","mb-1","mt-2","pb-2","cursor"],[1,"mx-auto","col-12","col-sm-10","col-md-10","col-xl-7","animated","fadeIn"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["class","row p-1",4,"ngIf"],[1,"row","p-1"],[1,"fa","fa-share","text-success","ml-1","mr-1","align-self-center",2,"font-size","20px"],[1,"col-4","col-sm-4","col-md-4","margin-x6","align-self-center"],[1,"text-dark",2,"font-size","18px"],["style","font-size: 12px;",4,"ngIf"],[1,"col","col-sm-3","col-md-4","text-right","align-self-center"],[1,"text-muted",2,"font-size","10px"],[2,"font-size","17px"],[1,"col","col-sm-4","col-md-3","text-right","align-self-center",2,"font-size","18px"],[1,"fa","fa-edit","cursor","margin-x6",3,"routerLink"],[1,"fa","fa-trash","cursor",3,"click"],[2,"font-size","12px"],[1,"fa","fa-reply","text-danger","ml-1","mr-1","align-self-center",2,"font-size","18px"],[1,"col-4","col-sm-4","col-md-4","margin-x6"],[2,"font-size","18px"],[1,"row","container","mx-auto"],[1,"card","col-12","col-sm-4","mx-auto","my-2"],[1,"card-body"],[1,"d-block"],[1,"stats"],[1,"text-success","text-center"],[1,"mx-auto","text-center"],[1,"text-danger","text-center"],[1,"text-white","text-center"],[1,"mx-auto","text-white","text-center"]],template:function(t,e){1&t&&(i.ec(0,B,1,0,"app-loading",0),i.Mb(1,"div",1),i.ec(2,E,4,3,"div",2),i.ec(3,O,3,0,"div",3),i.Lb(),i.ec(4,T,6,0,"div",4),i.ec(5,F,4,0,"div",4),i.ec(6,J,3,0,"div",5),i.ec(7,A,4,1,"div",6),i.ec(8,U,3,0,"div",5),i.ec(9,X,21,4,"div",7),i.ec(10,P,9,5,"div",8)),2&t&&(i.Wb("ngIf",e.loading),i.yb(2),i.Wb("ngIf",!e.loading&&e.data),i.yb(1),i.Wb("ngIf",!e.loading&&!e.data),i.yb(1),i.Wb("ngIf",!e.loading&&!e.info&&!e.data),i.yb(1),i.Wb("ngIf",!e.loading&&!e.data&&e.info),i.yb(1),i.Wb("ngIf",!e.loading&&!e.data&&e.info),i.yb(1),i.Wb("ngIf",!e.loading&&e.data&&e.info),i.yb(1),i.Wb("ngIf",!e.loading&&e.newMovButton&&e.data),i.yb(1),i.Wb("ngIf",!e.loading&&e.data&&!e.changedMonth),i.yb(1),i.Wb("ngIf",!e.loading&&e.data&&!e.changedMonth))},directives:[c.i,r,c.h,o.k,o.q,s.e,s.c],encapsulation:2}),t})();function R(t,e){if(1&t){const t=i.Nb();i.Mb(0,"button",11),i.Tb("click",function(){return i.bc(t),i.Vb().editInfo()}),i.Kb(1,"i",12),i.Lb()}}function Z(t,e){if(1&t){const t=i.Nb();i.Mb(0,"button",13),i.Tb("click",function(){return i.bc(t),i.Vb().saveInfo()}),i.Kb(1,"i",14),i.Lb()}}let Y=(()=>{class t{constructor(t){this.userService=t,this.name="",this.email="",this.edit=!1,this.disabled=!0}ngOnInit(){this.user=this.userService.user,this.email=this.user.email,this.name=this.user.displayName}saveInfo(){this.userService.UpdateProfileName(this.name).then(()=>!0).catch(t=>{w.a.fire("Error",t.message,"error"),this.name=this.user.displayName}),this.userService.UpdateProfileEmail(this.email).then(()=>!0).catch(t=>{console.log(t),w.a.fire("Error",t.message,"error"),this.email=this.user.email}),this.edit=!1,this.disabled=!0}editInfo(){this.edit=!0,this.disabled=!1}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(a.a))},t.\u0275cmp=i.Db({type:t,selectors:[["app-user-card"]],decls:21,vars:6,consts:[[1,"card","text-center"],[1,"card-body"],[1,"card-title"],[1,"fa","fa-user-o"],["id","user",1,"table",2,"clear","both"],["autocomplete","off","type","text","name","name","id","",1,"form-control","form-material","col-8","mx-auto",3,"disabled","ngModel","ngModelChange"],["autocomplete","off","type","text","name","email","id","",1,"form-control","col-8","mx-auto",3,"disabled","ngModel","ngModelChange"],[1,"row","mx-auto","text-center","stick-button",2,"top","-45px","position","relative"],[1,"col","col-md-12","mt-2"],["type","submit","class","animated fadeIn btn btn-secondary round-button text-gray",3,"click",4,"ngIf"],["type","submit","class","animated fadeIn btn btn-success round-button text-white",3,"click",4,"ngIf"],["type","submit",1,"animated","fadeIn","btn","btn-secondary","round-button","text-gray",3,"click"],[1,"fa","fa-pencil","fa-2x"],["type","submit",1,"animated","fadeIn","btn","btn-success","round-button","text-white",3,"click"],[1,"fa","fa-save","fa-2x"]],template:function(t,e){1&t&&(i.Mb(0,"div",0),i.Mb(1,"div",1),i.Mb(2,"h3",2),i.Kb(3,"i",3),i.fc(4," Informaci\xf3n personal "),i.Lb(),i.Mb(5,"table",4),i.Mb(6,"tbody"),i.Mb(7,"tr"),i.Mb(8,"td"),i.fc(9,"Nombre"),i.Lb(),i.Mb(10,"td"),i.Mb(11,"input",5),i.Tb("ngModelChange",function(t){return e.name=t}),i.Lb(),i.Lb(),i.Lb(),i.Mb(12,"tr"),i.Mb(13,"td"),i.fc(14,"E-mail"),i.Lb(),i.Mb(15,"td"),i.Mb(16,"input",6),i.Tb("ngModelChange",function(t){return e.email=t}),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(17,"div",7),i.Mb(18,"div",8),i.ec(19,R,2,0,"button",9),i.ec(20,Z,2,0,"button",10),i.Lb(),i.Lb()),2&t&&(i.yb(11),i.Wb("disabled",e.disabled)("ngModel",e.name),i.yb(5),i.Wb("disabled",e.disabled)("ngModel",e.email),i.yb(3),i.Wb("ngIf",!e.edit),i.yb(1),i.Wb("ngIf",e.edit))},directives:[o.b,o.g,o.j,c.i],encapsulation:2}),t})();function _(t,e){1&t&&i.Kb(0,"app-loading",2)}function H(t,e){if(1&t&&(i.Mb(0,"option",25),i.fc(1),i.Lb()),2&t){const t=e.$implicit;i.Wb("value",t),i.yb(1),i.hc("",t,"%")}}function tt(t,e){if(1&t){const t=i.Nb();i.Mb(0,"tr"),i.Mb(1,"td"),i.fc(2," \xbfCu\xe1nto quer\xe9s ahorrar?"),i.Lb(),i.Mb(3,"td"),i.Mb(4,"div",16),i.Mb(5,"select",24),i.Tb("ngModelChange",function(e){return i.bc(t),i.Vb(2).info.percent=e}),i.ec(6,H,2,2,"option",19),i.Lb(),i.Kb(7,"label",14),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=i.Vb(2);i.yb(5),i.Wb("ngModel",t.info.percent),i.yb(1),i.Wb("ngForOf",t.percents)}}function et(t,e){if(1&t&&(i.Mb(0,"option",25),i.fc(1),i.Lb()),2&t){const t=e.$implicit;i.Xb("value",t),i.yb(1),i.gc(t)}}function nt(t,e){if(1&t){const t=i.Nb();i.Mb(0,"div",3),i.Mb(1,"div",4),i.Mb(2,"div",5),i.Mb(3,"div",6),i.Mb(4,"h3",7),i.Kb(5,"i",8),i.fc(6," Informaci\xf3n financiera "),i.Lb(),i.Mb(7,"table",9),i.Mb(8,"tbody"),i.Mb(9,"tr"),i.Mb(10,"td"),i.fc(11,"Simbolo de moneda preferido"),i.Lb(),i.Mb(12,"td"),i.Mb(13,"input",10),i.Tb("ngModelChange",function(e){return i.bc(t),i.Vb().info.symbol=e}),i.Lb(),i.Lb(),i.Lb(),i.Mb(14,"tr"),i.Mb(15,"td"),i.fc(16,"\xbfCuanto cobras?"),i.Lb(),i.Mb(17,"td"),i.Mb(18,"input",11),i.Tb("ngModelChange",function(e){return i.bc(t),i.Vb().info.salary=e}),i.Lb(),i.Lb(),i.Lb(),i.Mb(19,"tr"),i.Mb(20,"td"),i.fc(21," \xbfAhorr\xe1s?"),i.Lb(),i.Mb(22,"td"),i.Mb(23,"div",12),i.Mb(24,"input",13),i.Tb("ngModelChange",function(e){return i.bc(t),i.Vb().info.saving=e}),i.Lb(),i.Kb(25,"label",14),i.Lb(),i.Lb(),i.Lb(),i.ec(26,tt,8,2,"tr",15),i.Mb(27,"tr"),i.Mb(28,"td"),i.fc(29," \xbfQu\xe9 dia cobr\xe1s? "),i.Lb(),i.Mb(30,"td"),i.Mb(31,"div",16),i.Mb(32,"select",17),i.Tb("ngModelChange",function(e){return i.bc(t),i.Vb().info.day=e}),i.Mb(33,"option",18),i.fc(34,"Escoge uno..."),i.Lb(),i.ec(35,et,2,2,"option",19),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Mb(36,"div",20),i.Mb(37,"div",21),i.Mb(38,"button",22),i.Tb("click",function(){return i.bc(t),i.Vb().saveInfo()}),i.Kb(39,"i",23),i.Lb(),i.Lb(),i.Lb(),i.Lb(),i.Lb()}if(2&t){const t=i.Vb();i.yb(13),i.Wb("ngModel",t.info.symbol),i.yb(5),i.Wb("ngModel",t.info.salary),i.yb(6),i.Wb("ngModel",t.info.saving),i.yb(2),i.Wb("ngIf",t.info.saving),i.yb(6),i.Wb("ngModel",t.info.day),i.yb(3),i.Wb("ngForOf",t.dayMonth)}}function ot(t,e){1&t&&(i.Mb(0,"div",3),i.Mb(1,"div",4),i.Kb(2,"app-user-card"),i.Lb(),i.Lb())}const it=[{path:"",component:Q},{path:"home",component:Q},{path:"info",component:(()=>{class t{constructor(t,e,n){this.dB=t,this.userService=e,this.router=n,this.saved=!1,this.dayMonth=[],this.percents=[],this.categories=[],this.info={salary:0,saving:!0,percent:10,day:1,symbol:"$"},this.uid=this.userService.user.uid,this.user=this.userService.user,this.firstMovement={type:"ingreso",amount:0,category:"Salario",id:"",month:0,comment:""},this.saveMovement={type:"gasto",amount:0,category:"Ahorro",id:"",month:0,comment:""},this.loading=!0}ngOnDestroy(){this.subs.unsubscribe()}ngOnInit(){this.subs=this.getInfo(this.uid).subscribe(t=>{t&&null!==t&&(this.info=t)},t=>!1);for(let t=1;t<=40;t++)t%5==0&&this.percents.push(t);this.daysMonth(),this.subs=this.dB.getCategories(this.uid).subscribe(t=>{t&&(this.categories=Object.values(t))},t=>!1),setTimeout(()=>{this.loading=!1},1e3)}daysMonth(){for(let t=1;t<=31;t++)this.dayMonth.push(t)}saveInfo(){if(0!==this.info.salary){const t=(new Date).getMonth();this.dB.saveInfo(this.uid,this.info).then(()=>{w.a.fire({title:"\xbfQuer\xe9s crear movimientos de salario y ahorro?",icon:"question",allowEnterKey:!0,allowOutsideClick:!1,showCancelButton:!0,showConfirmButton:!0,confirmButtonText:"Si, crear autom\xe1ticamente movimientos para cada mes.",confirmButtonColor:"#3085d6",cancelButtonText:"No, prefiero crear cada movimiento manualmente.",cancelButtonColor:"#d33"}).then(e=>{if(e.isConfirmed){this.firstMovement.amount=this.info.salary,this.firstMovement.id=t.toString(),this.saveMovement.amount=this.info.salary*this.info.percent/100,this.saveMovement.id=(t+1).toString();for(let e=t;e<=11;e++)this.info.saving?(this.firstMovement.month=e,this.saveMovement.month=e,this.dB.saveMovement(this.uid,this.firstMovement.id,this.firstMovement.month,this.firstMovement),this.dB.saveMovement(this.uid,this.saveMovement.id,this.saveMovement.month,this.saveMovement)):(this.firstMovement.month=e,this.dB.saveMovement(this.uid,this.firstMovement.id,this.firstMovement.month,this.firstMovement));this.categories.includes("Salario")||this.dB.saveCategory(this.firstMovement.category,this.uid),this.categories.includes("Ahorro")||this.dB.saveCategory(this.saveMovement.category,this.uid),w.a.fire("Guardado","Se ha guardado tu informaci\xf3n y se crearon movimientos","success").then(()=>this.router.navigateByUrl("/home")).catch(t=>console.error(t))}else w.a.fire("Guardado!","Se ha guardado tu informaci\xf3n","success").then(()=>this.router.navigateByUrl("/home")).catch(t=>console.error(t))}).catch(t=>{})}).catch(t=>console.log(t))}}getInfo(t){return this.dB.getInfo(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(b.a),i.Jb(a.a),i.Jb(s.b))},t.\u0275cmp=i.Db({type:t,selectors:[["app-info"]],decls:3,vars:3,consts:[["class","animated fadeIn",4,"ngIf"],["class","row mt-2 animated fadeIn container mx-auto",4,"ngIf"],[1,"animated","fadeIn"],[1,"row","mt-2","animated","fadeIn","container","mx-auto"],[1,"col-12"],[1,"card","text-center"],[1,"card-body"],[1,"card-title"],[1,"fa","fa-money"],["id","user",1,"table",2,"clear","both"],["autocomplete","off","type","text","name","symbol","id","",1,"form-control","form-material","col-8","mx-auto",3,"ngModel","ngModelChange"],["autocomplete","off","type","number","name","monto","id","",1,"form-control","col-8","mx-auto",3,"ngModel","ngModelChange"],[1,"checkbox","checkbox-success"],["name","saving","id","checkbox1","type","checkbox",3,"ngModel","ngModelChange"],["for","checkbox1"],[4,"ngIf"],[1,"col-8","mx-auto"],["name","day","id","inlineFormCustomSelect",1,"custom-select","col-12",3,"ngModel","ngModelChange"],["selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"row","mx-auto","text-center","stick-button",2,"top","-45px","position","relative"],[1,"col","col-md-12","mt-2"],["type","submit",1,"btn","btn-success","round-button","text-white",3,"click"],[1,"fa","fa-save","fa-2x"],["name","percent","id","percent",1,"custom-select","col-12",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,e){1&t&&(i.ec(0,_,1,0,"app-loading",0),i.ec(1,nt,40,6,"div",1),i.ec(2,ot,3,0,"div",1)),2&t&&(i.Wb("ngIf",e.loading),i.yb(1),i.Wb("ngIf",!e.loading),i.yb(1),i.Wb("ngIf",!e.loading))},directives:[c.i,r,o.b,o.g,o.j,o.l,o.a,o.o,o.k,o.q,c.h,Y],encapsulation:2}),t})()},{path:"new",component:x},{path:"edit/:month/:id",component:M}];let st=(()=>{class t{}return t.\u0275mod=i.Hb({type:t}),t.\u0275inj=i.Gb({factory:function(e){return new(e||t)},imports:[[s.f.forChild(it)],s.f]}),t})()}}]);